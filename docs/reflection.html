
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Reflection &#8212; miros-rabbitmq 2.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Recipes" href="recipes.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound" id="reflection">
</div>
<div class="section" id="id1">
<h1>Reflection<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>If you build a complex distributed system using a statechart you will need some
way to debug it.  The miros-rabbitmq library provides two different encrypted
topic based networks called the snoop_trace and the snoop_spy network.  To turn
a network on, you enable it <cite>before</cite> calling <code class="docutils literal notranslate"><span class="pre">start_at</span></code> in your statechart.</p>
<div class="section" id="snoop-trace-network">
<span id="reflection-snoop-trace-network"></span><h2>Snoop Trace Network<a class="headerlink" href="#snoop-trace-network" title="Permalink to this headline">¶</a></h2>
<p>To use this network, call <code class="docutils literal notranslate"><span class="pre">enable_snoop_trace</span></code> on your NetworkedActiveObject
or NetworkedFactory prior to calling the <code class="docutils literal notranslate"><span class="pre">start_at</span></code> method of the statechart.</p>
<p>Enabling the trace does two things, a program instance will:</p>
<ul class="simple">
<li>send it’s trace information to every other enabled-snoop-trace-instance in
the distributed system.</li>
<li>receive the trace information from every other enabled-snoop-trace-instance in
the distributed system.</li>
</ul>
<p>For the snoop network to work all of the enabled-snoop-trace-instances will need
the same symmetric encryption key, and the snoop_trace network can have a
different symmetric encryption key from the mesh and the snoop_spy networks.
You would set this encryption key in the initialization call of the
NeNetworkedActiveObject or the NetworkedFactory, using the
<code class="docutils literal notranslate"><span class="pre">trace_snoop_encryption_key</span></code> named attribute.  If you do not explicitly set
this key, the <code class="docutils literal notranslate"><span class="pre">mesh_encryption_key</span></code> will be used to encrypt the snoop trace
information.</p>
<p>To create an encryption key which will be accepted by this library, use Fernet:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cryptography</span> <span class="kn">import</span> <span class="n">Fernet</span>
<span class="n">Fernet</span><span class="o">.</span><span class="n">generate_key</span><span class="p">()</span> <span class="c1"># =&gt; b&#39;u3Uc-qAi9iiCv3fkBfRUAKrM1gH8w51-nVU8M8A73Jg=&#39;</span>
</pre></div>
</div>
<p>The snoop trace stream of snoop trace network, consists of a lot of information
coming back from each of the contributing nodes in the distributed system.  To
make it easier to distinguish your locally running instance from the information
of the other nodes, it’s name is colored in blue and the names of the other
nodes are colored in purple.</p>
<p>While this coloring is helpful while viewing things in your terminal it can
become problematic when trying to log.  For this reason, a
<code class="docutils literal notranslate"><span class="pre">enable_snoop_trace_no_color</span></code> api is provided in both of the
NetworkedActiveObject and NetworkedFactory classes.  You would use the
<code class="docutils literal notranslate"><span class="pre">enable_snoop_trace_no_color</span></code> call when you want your local instance to print
uncolored information to the terminal which could be re-directed into a log
without the ANSI color codes.</p>
<p>Both the NetworkedActiveObject and the NetworkedFactory classes provide a way to
make print statements into the snoop_trace_network.  To write custom information into
the snoop trace network, you would call the <code class="docutils literal notranslate"><span class="pre">snoop_scribble</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ao</span><span class="o">.</span><span class="n">snoop_scribble</span><span class="p">(</span><span class="s2">&quot;Some message to be seen by all monitoring nodes&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="snoop-spy-network">
<span id="reflection-snoop-spy-network"></span><h2>Snoop Spy Network<a class="headerlink" href="#snoop-spy-network" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="tracing-locally">
<span id="reflection-tracing-locally"></span><h2>Tracing Locally<a class="headerlink" href="#tracing-locally" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html">
  <img class="logo_a" src="_static/miros_rabbitmq_icon_only.svg" width="90" alt="Logo" >
</a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Reflection</a><ul>
<li><a class="reference internal" href="#snoop-trace-network">Snoop Trace Network</a></li>
<li><a class="reference internal" href="#snoop-spy-network">Snoop Spy Network</a></li>
<li><a class="reference internal" href="#tracing-locally">Tracing Locally</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="recipes.html" title="previous chapter">Recipes</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/reflection.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Scott Volk.
      
      |
      <a href="_sources/reflection.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>